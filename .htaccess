# No indexes
Options -Indexes

#Sever Errors
ErrorDocument 404 /errors/404/
ErrorDocument 403 /errors/404/

# Make defualt cache expire 1 day after modification
# Site is still in development, updates are constanly made. 
ExpiresActive On
ExpiresDefault "access plus 1 day"

# Add specific type cache control
# Images
ExpiresByType image/jpeg "access plus 1 year"
ExpiresByType image/gif "access plus 1 year"
ExpiresByType image/png "access plus 1 year"
ExpiresByType image/webp "access plus 1 year"
ExpiresByType image/svg+xml "access plus 1 year"
ExpiresByType image/x-icon "access plus 1 year"
# Video
ExpiresByType video/mp4 "access plus 1 year"
ExpiresByType video/mpeg "access plus 1 year"
# HTML, CSS, JavaScript
ExpiresByType text/html "access plus 1 month"
ExpiresByType text/css "access plus 1 week"
ExpiresByType text/javascript "access plus 1 month"
ExpiresByType application/javascript "access plus 1 month"

# Makes default charset UTF-8
AddDefaultCharset UTF-8

# Makes the defualt language US English.
DefaultLanguage en-US

# Sets the file that Apache will serve if a directory is requested.
DirectoryIndex index.php main.php index.html main.html index.txt main.txt index.js main.js index.css main.css index.json main.json index.pdf index.png index.jpg index.jpeg index.svg index.mp4 index main > ~ " "

# Block off files that I don't want indexed
<FilesMatch "(^\.htaccess$)|(robots\.txt)$">
Header set X-Robots-Tag "noindex"
</FilesMatch> 

<FilesMatch "test\.html">

</FilesMatch>

# Redirect pages/files
Redirect 301 /js/ /apis/
Redirect 301 /apis/ /gr/
Redirect 301 /vids/ /videos/
Redirect 301 /images/ /imgs/

# Add trailing slash
RewriteEngine on
RewriteCond %{REQUEST_URI} /+[^\.]+$
RewriteRule ^(.+[^/])$ %{REQUEST_URI}/ [R=301,L]

#Forces non-www
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.gavinmorrow.com
RewriteRule (.*) http://gavinmorrow.com/$1 [R=301,L]

# Set server time zone
SetEnv TZ America/New_York

<FilesMatch "favicon.ico">
Header set Content-Type "image/png"
</FilesMatch>